---
title: 测试自动部署
date: 2017-07-08 10:19:05
categories: travis-ci
comments: true
---

测试自动部署
---
1、第一次提交测试
2、第二次提交测试
3、测试源码仓和发布仓代码分离，互不干涉
4、貌似自动部署成功了，哈哈哈...（笑成智障中...）
5、测试是否是令牌权限没开到位的问题
6、权限开到位，初步判断是个travis配置问题了
> 正确

   - sed -i'' "s~git@github.com:HuangRongjun/HuangRongjun.github.io.git~https://${GH_TOKEN}:x-oauth-basic@github.com/HuangRongjun/HuangRongjun.github.io.git~" _config.yml

> 无效

    - sed -i'' "/^ *repo/s~github\.com~${GH_TOKEN}@github.com~" _config.yml

7、测试GitHub 令牌只开放默认权限的情况
8、经过一条的捣鼓，只需要开启repo权限就可了，这是必须权限，什么权限都不勾选TravisCI无法push到GitHub
9、测试自动部署是不是删除发布仓库的所有commit历史